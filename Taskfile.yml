version: '2'

tasks:

  install:
    cmds:
      - nimble install

  build:
    cmds:
      - nim c -o:./ribboncd{{exeExt}} src/ribboncd.nim 
    sources:
      - ./src/*.nim
      - ./src/**/.nim
    generates:
      - ribboncd{{exeExt}}

  test:
    cmds:
      - nimble test

  run:
    cmds:
      - nim c -o:./ribboncd{{exeExt}} -r src/ribboncd.nim

  release:
    cmds:
      - nim c -d:release --opt:size --passL:-s -o:./ribboncd{{exeExt}} src/ribboncd.nim

  clean:
    cmds:
      - rm ribboncd{{exeExt}}
      - rm *.dll
